<html>
<head>
  <style>
    .button { display: block; } 
    div { display: block; float: left;}
  </style>
</head>
<body>
<div class="grid">
  <div id="group-1">
    <input class="button" type="checkbox" value="1"/>
    <input class="button" type="checkbox" value="2"/>
    <input class="button" type="checkbox" value="3"/>
    <input class="button" type="checkbox" value="4"/>
    <input class="button" type="checkbox" value="5"/>
    <input class="button" type="checkbox" value="6"/>
    <input class="button" type="checkbox" value="7"/>
    <input class="button" type="checkbox" value="8"/>
    <input class="button" type="checkbox" value="9"/>
    <input class="button" type="checkbox" value="10"/>
    <input class="button" type="checkbox" value="11"/>
    <input class="button" type="checkbox" value="12"/>
    <input class="button" type="checkbox" value="13"/>
    <input class="button" type="checkbox" value="14"/>
    <input class="button" type="checkbox" value="15"/>
    <input class="button" type="checkbox" value="16"/>
  </div>
    <div id="group-2">
    <input class="button" type="checkbox" value="1"/>
    <input class="button" type="checkbox" value="2"/>
    <input class="button" type="checkbox" value="3"/>
    <input class="button" type="checkbox" value="4"/>
    <input class="button" type="checkbox" value="5"/>
    <input class="button" type="checkbox" value="6"/>
    <input class="button" type="checkbox" value="7"/>
    <input class="button" type="checkbox" value="8"/>
    <input class="button" type="checkbox" value="9"/>
    <input class="button" type="checkbox" value="10"/>
    <input class="button" type="checkbox" value="11"/>
    <input class="button" type="checkbox" value="12"/>
    <input class="button" type="checkbox" value="13"/>
    <input class="button" type="checkbox" value="14"/>
    <input class="button" type="checkbox" value="15"/>
    <input class="button" type="checkbox" value="16"/>
  </div>
  <div id="group-3">
    <input class="button" type="checkbox" value="1"/>
    <input class="button" type="checkbox" value="2"/>
    <input class="button" type="checkbox" value="3"/>
    <input class="button" type="checkbox" value="4"/>
    <input class="button" type="checkbox" value="5"/>
    <input class="button" type="checkbox" value="6"/>
    <input class="button" type="checkbox" value="7"/>
    <input class="button" type="checkbox" value="8"/>
    <input class="button" type="checkbox" value="9"/>
    <input class="button" type="checkbox" value="10"/>
    <input class="button" type="checkbox" value="11"/>
    <input class="button" type="checkbox" value="12"/>
    <input class="button" type="checkbox" value="13"/>
    <input class="button" type="checkbox" value="14"/>
    <input class="button" type="checkbox" value="15"/>
    <input class="button" type="checkbox" value="16"/>
  </div>
  <div id="group-4">
    <input class="button" type="checkbox" value="1"/>
    <input class="button" type="checkbox" value="2"/>
    <input class="button" type="checkbox" value="3"/>
    <input class="button" type="checkbox" value="4"/>
    <input class="button" type="checkbox" value="5"/>
    <input class="button" type="checkbox" value="6"/>
    <input class="button" type="checkbox" value="7"/>
    <input class="button" type="checkbox" value="8"/>
    <input class="button" type="checkbox" value="9"/>
    <input class="button" type="checkbox" value="10"/>
    <input class="button" type="checkbox" value="11"/>
    <input class="button" type="checkbox" value="12"/>
    <input class="button" type="checkbox" value="13"/>
    <input class="button" type="checkbox" value="14"/>
    <input class="button" type="checkbox" value="15"/>
    <input class="button" type="checkbox" value="16"/>
  </div>
  <div id="group-5">
    <input class="button" type="checkbox" value="1"/>
    <input class="button" type="checkbox" value="2"/>
    <input class="button" type="checkbox" value="3"/>
    <input class="button" type="checkbox" value="4"/>
    <input class="button" type="checkbox" value="5"/>
    <input class="button" type="checkbox" value="6"/>
    <input class="button" type="checkbox" value="7"/>
    <input class="button" type="checkbox" value="8"/>
    <input class="button" type="checkbox" value="9"/>
    <input class="button" type="checkbox" value="10"/>
    <input class="button" type="checkbox" value="11"/>
    <input class="button" type="checkbox" value="12"/>
    <input class="button" type="checkbox" value="13"/>
    <input class="button" type="checkbox" value="14"/>
    <input class="button" type="checkbox" value="15"/>
    <input class="button" type="checkbox" value="16"/>
  </div>
  <div id="group-6">
    <input class="button" type="checkbox" value="1"/>
    <input class="button" type="checkbox" value="2"/>
    <input class="button" type="checkbox" value="3"/>
    <input class="button" type="checkbox" value="4"/>
    <input class="button" type="checkbox" value="5"/>
    <input class="button" type="checkbox" value="6"/>
    <input class="button" type="checkbox" value="7"/>
    <input class="button" type="checkbox" value="8"/>
    <input class="button" type="checkbox" value="9"/>
    <input class="button" type="checkbox" value="10"/>
    <input class="button" type="checkbox" value="11"/>
    <input class="button" type="checkbox" value="12"/>
    <input class="button" type="checkbox" value="13"/>
    <input class="button" type="checkbox" value="14"/>
    <input class="button" type="checkbox" value="15"/>
    <input class="button" type="checkbox" value="16"/>
  </div>
  <div id="group-7">
    <input class="button" type="checkbox" value="1"/>
    <input class="button" type="checkbox" value="2"/>
    <input class="button" type="checkbox" value="3"/>
    <input class="button" type="checkbox" value="4"/>
    <input class="button" type="checkbox" value="5"/>
    <input class="button" type="checkbox" value="6"/>
    <input class="button" type="checkbox" value="7"/>
    <input class="button" type="checkbox" value="8"/>
    <input class="button" type="checkbox" value="9"/>
    <input class="button" type="checkbox" value="10"/>
    <input class="button" type="checkbox" value="11"/>
    <input class="button" type="checkbox" value="12"/>
    <input class="button" type="checkbox" value="13"/>
    <input class="button" type="checkbox" value="14"/>
    <input class="button" type="checkbox" value="15"/>
    <input class="button" type="checkbox" value="16"/>
  </div>
  <div id="group-8">
    <input class="button" type="checkbox" value="1"/>
    <input class="button" type="checkbox" value="2"/>
    <input class="button" type="checkbox" value="3"/>
    <input class="button" type="checkbox" value="4"/>
    <input class="button" type="checkbox" value="5"/>
    <input class="button" type="checkbox" value="6"/>
    <input class="button" type="checkbox" value="7"/>
    <input class="button" type="checkbox" value="8"/>
    <input class="button" type="checkbox" value="9"/>
    <input class="button" type="checkbox" value="10"/>
    <input class="button" type="checkbox" value="11"/>
    <input class="button" type="checkbox" value="12"/>
    <input class="button" type="checkbox" value="13"/>
    <input class="button" type="checkbox" value="14"/>
    <input class="button" type="checkbox" value="15"/>
    <input class="button" type="checkbox" value="16"/>
  </div>
  <div id="group-9">
    <input class="button" type="checkbox" value="1"/>
    <input class="button" type="checkbox" value="2"/>
    <input class="button" type="checkbox" value="3"/>
    <input class="button" type="checkbox" value="4"/>
    <input class="button" type="checkbox" value="5"/>
    <input class="button" type="checkbox" value="6"/>
    <input class="button" type="checkbox" value="7"/>
    <input class="button" type="checkbox" value="8"/>
    <input class="button" type="checkbox" value="9"/>
    <input class="button" type="checkbox" value="10"/>
    <input class="button" type="checkbox" value="11"/>
    <input class="button" type="checkbox" value="12"/>
    <input class="button" type="checkbox" value="13"/>
    <input class="button" type="checkbox" value="14"/>
    <input class="button" type="checkbox" value="15"/>
    <input class="button" type="checkbox" value="16"/>
  </div>
  <div id="group-10">
    <input class="button" type="checkbox" value="1"/>
    <input class="button" type="checkbox" value="2"/>
    <input class="button" type="checkbox" value="3"/>
    <input class="button" type="checkbox" value="4"/>
    <input class="button" type="checkbox" value="5"/>
    <input class="button" type="checkbox" value="6"/>
    <input class="button" type="checkbox" value="7"/>
    <input class="button" type="checkbox" value="8"/>
    <input class="button" type="checkbox" value="9"/>
    <input class="button" type="checkbox" value="10"/>
    <input class="button" type="checkbox" value="11"/>
    <input class="button" type="checkbox" value="12"/>
    <input class="button" type="checkbox" value="13"/>
    <input class="button" type="checkbox" value="14"/>
    <input class="button" type="checkbox" value="15"/>
    <input class="button" type="checkbox" value="16"/>
  </div>
  <div id="group-11">
    <input class="button" type="checkbox" value="1"/>
    <input class="button" type="checkbox" value="2"/>
    <input class="button" type="checkbox" value="3"/>
    <input class="button" type="checkbox" value="4"/>
    <input class="button" type="checkbox" value="5"/>
    <input class="button" type="checkbox" value="6"/>
    <input class="button" type="checkbox" value="7"/>
    <input class="button" type="checkbox" value="8"/>
    <input class="button" type="checkbox" value="9"/>
    <input class="button" type="checkbox" value="10"/>
    <input class="button" type="checkbox" value="11"/>
    <input class="button" type="checkbox" value="12"/>
    <input class="button" type="checkbox" value="13"/>
    <input class="button" type="checkbox" value="14"/>
    <input class="button" type="checkbox" value="15"/>
    <input class="button" type="checkbox" value="16"/>
  </div>
  <div id="group-12">
    <input class="button" type="checkbox" value="1"/>
    <input class="button" type="checkbox" value="2"/>
    <input class="button" type="checkbox" value="3"/>
    <input class="button" type="checkbox" value="4"/>
    <input class="button" type="checkbox" value="5"/>
    <input class="button" type="checkbox" value="6"/>
    <input class="button" type="checkbox" value="7"/>
    <input class="button" type="checkbox" value="8"/>
    <input class="button" type="checkbox" value="9"/>
    <input class="button" type="checkbox" value="10"/>
    <input class="button" type="checkbox" value="11"/>
    <input class="button" type="checkbox" value="12"/>
    <input class="button" type="checkbox" value="13"/>
    <input class="button" type="checkbox" value="14"/>
    <input class="button" type="checkbox" value="15"/>
    <input class="button" type="checkbox" value="16"/>
  </div>
  <div id="group-13">
    <input class="button" type="checkbox" value="1"/>
    <input class="button" type="checkbox" value="2"/>
    <input class="button" type="checkbox" value="3"/>
    <input class="button" type="checkbox" value="4"/>
    <input class="button" type="checkbox" value="5"/>
    <input class="button" type="checkbox" value="6"/>
    <input class="button" type="checkbox" value="7"/>
    <input class="button" type="checkbox" value="8"/>
    <input class="button" type="checkbox" value="9"/>
    <input class="button" type="checkbox" value="10"/>
    <input class="button" type="checkbox" value="11"/>
    <input class="button" type="checkbox" value="12"/>
    <input class="button" type="checkbox" value="13"/>
    <input class="button" type="checkbox" value="14"/>
    <input class="button" type="checkbox" value="15"/>
    <input class="button" type="checkbox" value="16"/>
  </div>
  <div id="group-14">
    <input class="button" type="checkbox" value="1"/>
    <input class="button" type="checkbox" value="2"/>
    <input class="button" type="checkbox" value="3"/>
    <input class="button" type="checkbox" value="4"/>
    <input class="button" type="checkbox" value="5"/>
    <input class="button" type="checkbox" value="6"/>
    <input class="button" type="checkbox" value="7"/>
    <input class="button" type="checkbox" value="8"/>
    <input class="button" type="checkbox" value="9"/>
    <input class="button" type="checkbox" value="10"/>
    <input class="button" type="checkbox" value="11"/>
    <input class="button" type="checkbox" value="12"/>
    <input class="button" type="checkbox" value="13"/>
    <input class="button" type="checkbox" value="14"/>
    <input class="button" type="checkbox" value="15"/>
    <input class="button" type="checkbox" value="16"/>
  </div>
  <div id="group-15">
    <input class="button" type="checkbox" value="1"/>
    <input class="button" type="checkbox" value="2"/>
    <input class="button" type="checkbox" value="3"/>
    <input class="button" type="checkbox" value="4"/>
    <input class="button" type="checkbox" value="5"/>
    <input class="button" type="checkbox" value="6"/>
    <input class="button" type="checkbox" value="7"/>
    <input class="button" type="checkbox" value="8"/>
    <input class="button" type="checkbox" value="9"/>
    <input class="button" type="checkbox" value="10"/>
    <input class="button" type="checkbox" value="11"/>
    <input class="button" type="checkbox" value="12"/>
    <input class="button" type="checkbox" value="13"/>
    <input class="button" type="checkbox" value="14"/>
    <input class="button" type="checkbox" value="15"/>
    <input class="button" type="checkbox" value="16"/>
  </div>
  <div id="group-16">
    <input class="button" type="checkbox" value="1"/>
    <input class="button" type="checkbox" value="2"/>
    <input class="button" type="checkbox" value="3"/>
    <input class="button" type="checkbox" value="4"/>
    <input class="button" type="checkbox" value="5"/>
    <input class="button" type="checkbox" value="6"/>
    <input class="button" type="checkbox" value="7"/>
    <input class="button" type="checkbox" value="8"/>
    <input class="button" type="checkbox" value="9"/>
    <input class="button" type="checkbox" value="10"/>
    <input class="button" type="checkbox" value="11"/>
    <input class="button" type="checkbox" value="12"/>
    <input class="button" type="checkbox" value="13"/>
    <input class="button" type="checkbox" value="14"/>
    <input class="button" type="checkbox" value="15"/>
    <input class="button" type="checkbox" value="16"/>
  </div>
</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
<script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/q.js/1.0.1/q.js"></script>
<script>
//http://flippinawesome.org/2014/03/31/creating-sound-with-the-web-audio-api-and-oscillators/
//http://www.softsynth.com/webaudio/tone.php
//http://noisehack.com/custom-audio-effects-javascript-web-audio-api/
// https://chromium.googlesource.com/external/WebKit_LayoutTests/+/master/webaudio/audiobuffersource-playbackrate.html

var noteCatalogue=[];
var gainNode, oscillator;
var sampleRate = 44100.0;

var frequencies = [
'220.00',
'246.94',
'261.63',
'293.66',
'329.63',
'349.23',
'392.00',
'440.00',
'493.88',
'523.25',
'587.33',
'659.25',
'698.46',
'783.99',
'880.00', 
'987.77']

frequencies.reverse();

// sound is a wave. 
// the frequency, or hertz, is the note you hear. it affects how fast the wave oscillates.
// an oscillator can generate you a wave (e.g. sine, triangle, sawtooth) which produces different notes.
// you can change the frequency to change the pitch of the note. 

// If you are using a fixed length source of wave (e.g. something you downloaded from the internet), 
//        changing frequency changes the duration of the note.  Use .stop and .start with a duration, and loop the wave.
// clicks seem to be produced when the frequency 'jumps', producing breaks in the wave. 
//        also can happen when you try to 'write' multiple sources to the speakers at the same time. 
// It's a pipeline. Only one thing needs to output to your speakers! (context.destination)
// everything else - volume, distortion, etc. just chains from the source to the destination.
// it looks like you can't chain oscillators (they appear to have 0 inputs). but you could possibly chain other audio sources?
// each audio buffer note can only be played once. you need to recreate each new note to play.
// demo examples: 
//  -  plain notes
//  -  clipping the front of the note to stop the clicking
//  -  change stop time to add extra duration, + add linear ramp to value to the new duration to fade out
//  -  add multiple ramps up/down to introduce bouncing
//  -  add multiple oscillators to alternate the wave.
//  -  change frequencies of notes so that they are all in a common scale 

// problems - timeout is starting to lag with multiple notes playing.

function playSound(index) {
  time = context.currentTime;
  fadeout = 1;
  
  // generate the sound wave at specified note frequency
  var osc = context.createOscillator();
  osc.type = 'sine';
  osc.frequency.value = frequencies[index];
  osc.start(time);
  osc.stop(time + fadeout);

  // add 'bounce' to note, and fade in/out to avoid clicks.
  var gainNode = context.createGain();
  gainNode.gain.value = 0;
  gainNode.gain.linearRampToValueAtTime(0.01, time + 0.02);
  gainNode.gain.linearRampToValueAtTime(0.5, time + 0.125);
  gainNode.gain.linearRampToValueAtTime(0.2, time + 0.130);
  gainNode.gain.exponentialRampToValueAtTime(0.01, time + fadeout);

  osc.connect(gainNode);
  gainNode.connect(context.destination);       
}

function playNotesInColumn($elem) {
  $elem.css('background-color', '#eeeeee').animate({backgroundColor:'#ffffff'}, 'fast');

  $elem.children(':checked').each(function() {
    playSound($(this).val() - 1);
  });
  setTimeout(function() {
   playNotesInColumn($elem) 
  }, 2000); // repeat this column every 2 seconds. 
}

function loopSound() {
  $(".grid").children().each(function(index){
    var i = $(this);
    setTimeout(function() { 
      playNotesInColumn(i)
    }, index * 125); // play notes in each column at 125ms intervals.
  });
}

function init() {
  try {
    window.AudioContext = window.AudioContext||window.webkitAudioContext;
    context = new AudioContext();
  }
  catch(e) {
  	console.log(e);
    alert('Web Audio API is not supported in this browser. Please use Chrome or Safari');
  }
  loopSound();
}

window.addEventListener('load', init, false);

</script>
</body>
</html>